<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="icone.png">
    <title>Finan√ßa Simples - Sua Planilha Financeira Inteligente</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container mt-4">
        <!-- Header Principal -->
        <div class="header-principal text-center">
            <h1 class="display-5 fw-bold text-gradient">
                <i class="bi bi-graph-up"></i> Finan√ßa Simples
            </h1>
            <p class="text-muted">Sua planilha financeira inteligente</p>
            <div class="mt-2">
                <button class="btn btn-outline-danger btn-sm" onclick="mostrarModalLimpar()">
                    <i class="bi bi-trash"></i> Limpar Todos os Dados
                </button>
            </div>
        </div>

        <div class="row">
            <!-- Coluna Esquerda - Entradas e Objetivos -->
            <div class="col-lg-4">
                <!-- Painel de Renda -->
                <div class="card card-destaque mb-4">
                    <div class="card-header bg-success text-white">
                        <h5 class="mb-0"><i class="bi bi-cash-stack"></i> Renda do M√™s</h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-4">
                            <label class="form-label fw-bold">Sal√°rio Principal</label>
                            <div class="input-group">
                                <span class="input-group-text">R$</span>
                                <input type="number" class="form-control" id="salario" value="0" step="0.01">
                                <button class="btn btn-success" onclick="atualizarSalario()">
                                    <i class="bi bi-check-lg"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <label class="form-label fw-bold">Entradas Extras</label>
                            <div class="input-group mb-3">
                                <input type="text" class="form-control" id="entrada-desc" placeholder="Ex: Freelance">
                                <input type="number" class="form-control" id="entrada-valor" placeholder="Valor" step="0.01">
                                <button class="btn btn-outline-success" onclick="addEntrada()">
                                    <i class="bi bi-plus-lg"></i>
                                </button>
                            </div>
                            <div id="lista-entradas"></div>
                        </div>
                    </div>
                </div>

                <!-- Objetivos -->
                <div class="card card-destaque mb-4">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0"><i class="bi bi-bullseye"></i> Meus Objetivos</h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <div class="row g-2">
                                <div class="col-7">
                                    <input type="text" class="form-control" id="objetivo-nome" placeholder="Ex: Viagem para praia">
                                </div>
                                <div class="col-5">
                                    <input type="number" class="form-control" id="objetivo-valor" placeholder="Valor" step="0.01">
                                </div>
                            </div>
                            <button class="btn btn-primary w-100 mt-2" onclick="addObjetivo()">
                                <i class="bi bi-plus-circle"></i> Adicionar Objetivo
                            </button>
                        </div>
                        <div id="lista-objetivos"></div>
                    </div>
                </div>

                <!-- Dicas Inteligentes -->
                <div class="card card-destaque">
                    <div class="card-header bg-warning text-dark">
                        <h5 class="mb-0"><i class="bi bi-lightbulb"></i> Dicas Inteligentes</h5>
                    </div>
                    <div class="card-body">
                        <div id="dicas-financeiras"></div>
                    </div>
                </div>
            </div>

            <!-- Coluna Direita - Gastos e Resumo -->
            <div class="col-lg-8">
                <!-- Painel de Gastos -->
                <div class="card card-destaque mb-4">
                    <div class="card-header bg-danger text-white">
                        <h5 class="mb-0"><i class="bi bi-receipt"></i> Meus Gastos</h5>
                    </div>
                    <div class="card-body">
                        <div class="row g-3 mb-4">
                            <div class="col-md-4">
                                <input type="text" class="form-control" id="gasto-desc" placeholder="Descri√ß√£o">
                            </div>
                            <div class="col-md-3">
                                <select class="form-select" id="gasto-categoria">
                                    <option value="moradia">üè† Moradia</option>
                                    <option value="alimentacao">üçé Alimenta√ß√£o</option>
                                    <option value="transporte">üöó Transporte</option>
                                    <option value="lazer">üéÆ Lazer</option>
                                    <option value="saude">üè• Sa√∫de</option>
                                    <option value="educacao">üìö Educa√ß√£o</option>
                                    <option value="outros">üì¶ Outros</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <div class="input-group">
                                    <span class="input-group-text">R$</span>
                                    <input type="number" class="form-control" id="gasto-valor" placeholder="Valor" step="0.01">
                                </div>
                            </div>
                            <div class="col-md-2">
                                <button class="btn btn-danger w-100" onclick="addGasto()">
                                    <i class="bi bi-plus-lg"></i> Add
                                </button>
                            </div>
                        </div>
                        <div id="lista-gastos"></div>
                    </div>
                </div>

                <!-- Resumo Financeiro -->
                <div class="row mb-4">
                    <div class="col-md-6">
                        <div class="card card-destaque h-100 saldo-positivo" id="card-saldo">
                            <div class="card-body text-center">
                                <h6 class="text-muted mb-3">
                                    <i class="bi bi-wallet2"></i> Resumo do M√™s
                                </h6>
                                <div class="row">
                                    <div class="col-6">
                                        <div class="mb-3">
                                            <small class="text-muted d-block">Total de Entradas</small>
                                            <h4 id="total-entradas" class="valor-entrada">R$ 0,00</h4>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="mb-3">
                                            <small class="text-muted d-block">Total de Gastos</small>
                                            <h4 id="total-gastos" class="valor-gasto">R$ 0,00</h4>
                                        </div>
                                    </div>
                                </div>
                                <hr>
                                <div>
                                    <small class="text-muted d-block">Saldo Dispon√≠vel</small>
                                    <h2 id="saldo-restante" class="fw-bold">R$ 0,00</h2>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="card card-destaque h-100">
                            <div class="card-body text-center">
                                <h6 class="text-muted mb-3">
                                    <i class="bi bi-pie-chart"></i> Distribui√ß√£o por Categoria
                                </h6>
                                <div class="d-flex justify-content-center">
                                    <canvas id="grafico-categorias" width="200" height="200"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Gr√°fico e Exporta√ß√£o -->
                <div class="card card-destaque">
                    <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
                        <h5 class="mb-0"><i class="bi bi-bar-chart"></i> Evolu√ß√£o e Exporta√ß√£o</h5>
                        <button class="btn btn-exportar" onclick="exportarParaExcel()">
                            <i class="bi bi-download"></i> Exportar para Excel
                        </button>
                    </div>
                    <div class="card-body">
                        <canvas id="grafico-evolucao"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para Edi√ß√£o -->
    <div class="modal fade" id="modalEditar" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Editar Item</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="edit-tipo">
                    <input type="hidden" id="edit-index">
                    
                    <div class="mb-3">
                        <label class="form-label">Descri√ß√£o</label>
                        <input type="text" class="form-control" id="edit-descricao">
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Categoria</label>
                        <select class="form-select" id="edit-categoria">
                            <option value="moradia">Moradia</option>
                            <option value="alimentacao">Alimenta√ß√£o</option>
                            <option value="transporte">Transporte</option>
                            <option value="lazer">Lazer</option>
                            <option value="saude">Sa√∫de</option>
                            <option value="educacao">Educa√ß√£o</option>
                            <option value="outros">Outros</option>
                        </select>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Valor</label>
                        <div class="input-group">
                            <span class="input-group-text">R$</span>
                            <input type="number" class="form-control" id="edit-valor" step="0.01">
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-danger" onclick="removerItem()">Remover</button>
                    <button type="button" class="btn btn-primary" onclick="salvarEdicao()">Salvar</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    
    <script src="script.js"></script>
    
    <!-- Modal para Limpar Dados -->
    <div class="modal fade" id="modalLimpar" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-danger">
                        <i class="bi bi-exclamation-triangle"></i> Limpar Todos os Dados
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p class="alert alert-warning">
                        <i class="bi bi-exclamation-circle"></i> 
                        <strong>Aten√ß√£o!</strong> Esta a√ß√£o n√£o pode ser desfeita.
                    </p>
                    <p>Todos os dados ser√£o apagados, incluindo:</p>
                    <ul>
                        <li>Sal√°rio registrado</li>
                        <li>Entradas extras</li>
                        <li>Gastos do m√™s</li>
                        <li>Objetivos definidos</li>
                        <li>Hist√≥rico completo</li>
                    </ul>
                    <p class="text-muted">Certifique-se de ter exportado seus dados antes de continuar.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-danger" onclick="limparTodosOsDados()">
                        <i class="bi bi-trash"></i> Limpar Tudo
                    </button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>